import { Types } from "mongoose";
import { {{ modelName }} } from '{{ appRef }}/api/models';
import { {{ controllerInterfaceName }} } from '{{ appRef }}/interfaces/api/controllers';

export const {{ controllerName }}: {{ controllerInterfaceName }} = async ({ 
  {{#each fieldNames}}
    {{~this}},
  {{/each}}
}) => {

  const {{ modelPrimaryKeyName }} = new Types.ObjectId();
  const modelParams = {
    {{ modelPrimaryKeyName }},
		{{#each fieldNames}}
			{{~this}},
		{{/each}}
  };

  const {{ modelInstanceName }} = new {{ modelName }}(modelParams);
  await {{ modelInstanceName }}.save();

  return { {{ modelPrimaryKeyName }} };
}
